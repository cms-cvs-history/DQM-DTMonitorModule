process PROD = {
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi" 
    include "CondCore/DBCommon/data/CondDBSetup.cfi"

    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff" 
    include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
    include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"

    source = EmptyIOVSource {
	string timetype = "runnumber"
        uint64 firstValue = 1
	uint64 lastValue = 100
        uint64 interval = 90
    }



    untracked PSet maxEvents = {untracked int32 input = -1}

    include "DQMServices/Core/data/DQM.cfg"
    replace DQM.collectorHost = ""


    module eventInfoProvider = EventCoordinatesSource {
	untracked string eventInfoFolder = "EventInfo/"
    }

    service = MessageLogger {
        untracked vstring destinations = { "cout" }
        untracked vstring debugModules = { "resolutionTest_step1", "resolutionTest_step2", "resolutionTest_step3" }
        untracked vstring categories = { "resolution" }
        untracked PSet cout = {
            untracked string threshold = "ERROR"
            untracked PSet default = { untracked int32 limit = 0 }
            untracked PSet FwkJob  = { untracked int32 limit = 0 }
            untracked bool noLineBreaks = true
            untracked PSet resolution = {untracked int32 limit = 10000000}
        }
    } 


   module qTester = QualityTester{
     untracked int32 prescaleFactor = 1
     untracked FileInPath qtList = "DQM/DTMonitorClient/test/QualityTests_ttrig.xml" 
   }

 
   module resolutionTest_step1 = DTResolutionTest{
      	untracked bool debug = false
        untracked bool calibModule = true
        untracked string folderRoot = ""
        untracked string inputFile = "/afs/cern.ch/cms/CAF/CMSALCA/ALCA_MUONCALIB/DTCALIB/CRUZET/ttrig/DTkFactValidation_RUNNUMBERTEMPLATE.root"
        untracked string STEP = "STEP1"
	untracked string histoTag = "hResDist_STEP1"
        untracked string histoTag2D = "hResDistVsDist_STEP1"

        #Names of the quality tests: they must match those specified in "qtList"
	untracked string resDistributionTestName = "ResidualsDistributionGaussianTest"
	untracked string meanTestName = "ResidualsMeanInRange"
	untracked string sigmaTestName = "ResidualsSigmaInRange"
        untracked bool runningStandalone = true
        untracked int32 diagnosticPrescale = 1

	bool OutputMEsInRootFile = false
    }

   
   module resolutionTest_step2 = DTResolutionTest{
      	untracked bool debug = false
        untracked bool calibModule = true
        untracked string inputFile = "/afs/cern.ch/cms/CAF/CMSALCA/ALCA_MUONCALIB/DTCALIB/CRUZET/ttrig/DTkFactValidation_RUNNUMBERTEMPLATE.root"
        untracked string folderRoot = ""
        untracked string STEP = "STEP2"
	untracked string histoTag = "hResDist_STEP2"
        untracked string histoTag2D = "hResDistVsDist_STEP2"

        #Names of the quality tests: they must match those specified in "qtList"
	untracked string resDistributionTestName = "ResidualsDistributionGaussianTest"
	untracked string meanTestName = "ResidualsMeanInRange"
	untracked string sigmaTestName = "ResidualsSigmaInRange"
        untracked bool runningStandalone = true
        untracked int32 diagnosticPrescale = 1
	bool OutputMEsInRootFile = false

    }
   

    module resolutionTest_step3 = DTResolutionTest{
      	untracked bool debug = false
        untracked bool calibModule = true
	untracked string inputFile = "/afs/cern.ch/cms/CAF/CMSALCA/ALCA_MUONCALIB/DTCALIB/CRUZET/ttrig/DTkFactValidation_RUNNUMBERTEMPLATE.root"
        untracked string folderRoot = ""
        untracked string STEP = "STEP3"
	untracked string histoTag = "hResDist_STEP3"
        untracked string histoTag2D = "hResDistVsDist_STEP3"

        #Names of the quality tests: they must match those specified in "qtList"
	untracked string resDistributionTestName = "ResidualsDistributionGaussianTest"
	untracked string meanTestName = "ResidualsMeanInRange"
	untracked string sigmaTestName = "ResidualsSigmaInRange"
        untracked bool runningStandalone = true
        untracked int32 diagnosticPrescale = 1
	bool OutputMEsInRootFile = true 
	string OutputFileName="/afs/cern.ch/cms/CAF/CMSALCA/ALCA_MUONCALIB/DTCALIB/CRUZET/ttrig/SummaryResiduals_RUNNUMBERTEMPLATE.root"

    }


   # run the client
   sequence secondStep = {resolutionTest_step1, resolutionTest_step2, resolutionTest_step3, qTester}

   path p = {secondStep}

}
