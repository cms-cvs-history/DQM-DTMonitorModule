process MONITOR = {    


	#Mapping
	es_source = PoolDBESSource { VPSet toGet = {
                                      {string record = "DTReadOutMappingRcd" 
                                       string tag = "MB1_map"}
                                     }
		    		     bool loadAll = true
				     string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/commissioning/MB1_map.db"
				     untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite/commissioning/commissioningcatalog.xml"
			             string timetype = "runnumber" 
				     untracked uint32 authenticationMethod = 1
				   }
	#Geometry
	es_source = XMLIdealGeometryESSource {
			FileInPath GeometryConfiguration="Geometry/DTGeometry/test/muonConfiguration.xml"
		 	string rootNodeName = "cms:CMSE"
		     }
	es_module = DTGeometryESModule { }


	# Event Formatter
	source = DaqSource{ string reader = "DTROS8FileReader"
	   	untracked int32 maxEvents = -1
			PSet pset = {  string fileName ="input.raw" } 
	}
	
	# Data Unpacker
	module dtunpacker = DTUnpackingModule{ 
		string dataType = "ROS8" }

#	source = PoolSource{ untracked string fileName = "dtdigis.root" 
#		  untracked int32 maxEvents = 100000
#		}
	
	# DT Digi DQM
	module dtMonitor = DTTestPulsesTask{
		untracked string outputFile = "TP.root"
		untracked bool readDB = false
		int32 defaultTtrig_TP = 5900
		untracked int32 t0sRangeLowerBound = -100
		untracked int32 t0sRangeUpperBound = 100
	}
	
	path p = {dtunpacker, dtMonitor}	
	#path p = {dtMonitor}	

	service = DaqMonitorROOTBackEnd{ }
	
	service = MonitorDaemon{
	  # if true, will automatically start DQM thread in background
	  # (default: false)
	  untracked bool AutoInstantiate = true
	
	  # if >=0, upon a connection problem, the source will automatically 
	  # attempt to reconnect with a time delay (secs) specified here 
	  # (default: 5)
	  untracked int32 reconnect_delay = 5
	
	  # collector hostname
	  # (default: localhost)
	  untracked string DestinationAddress = "localhost"
	
	  # port for communicating with collector
	  # (default: 9090)
	  untracked int32 SendPort = 9090
	
	  # monitoring period in ms (i.e. how often monitoring elements 
	  # are shipped to the collector
	  # (default: 1000)
	  untracked int32 UpdateDelay = 1000
	
	  # name of DQM source
	  # (default: DQMSource)
	  untracked string NameAsSource = "FU0"
	}

}

